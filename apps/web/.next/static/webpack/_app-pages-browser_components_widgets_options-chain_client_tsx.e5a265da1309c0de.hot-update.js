"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_app-pages-browser_components_widgets_options-chain_client_tsx",{

/***/ "(app-pages-browser)/./lib/chain-stream.ts":
/*!*****************************!*\
  !*** ./lib/chain-stream.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectChainStream: function() { return /* binding */ connectChainStream; },\n/* harmony export */   mockChain: function() { return /* binding */ mockChain; }\n/* harmony export */ });\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js\");\nconst FALLBACK_EXPIRY = \"30D\";\nfunction mockChain(symbol) {\n    const base = 50;\n    const rows = Array.from({\n        length: 16\n    }, (_, i)=>{\n        const k = (base + i) * 2;\n        return {\n            strike: 50000 + k * 100,\n            callIV: 0.45 + Math.sin(i / 3) * 0.05,\n            callBid: 900 - i * 14 + Math.random() * 10,\n            callAsk: 920 - i * 13 + Math.random() * 10,\n            putBid: 880 + i * 12 + Math.random() * 10,\n            putAsk: 900 + i * 13 + Math.random() * 10,\n            putIV: 0.42 + Math.cos(i / 4) * 0.05\n        };\n    });\n    return {\n        symbol,\n        expiry: FALLBACK_EXPIRY,\n        rows,\n        isLive: false\n    };\n}\nfunction connectChainStream(symbol, onSnapshot) {\n    let ws = null;\n    let timer = null;\n    try {\n        const base =  true && window.__NEXT_PUBLIC_ORCH_WS || process.env.NEXT_PUBLIC_ORCH_WS || \"ws://127.0.0.1:8080\";\n        const url = base + \"/chain?symbol=\".concat(encodeURIComponent(symbol));\n        ws = new WebSocket(url);\n        ws.onmessage = (evt)=>{\n            try {\n                const data = JSON.parse(evt.data);\n                if (data && data.rows) onSnapshot({\n                    ...data,\n                    isLive: true\n                });\n            } catch (e) {}\n        };\n        ws.onerror = ()=>{\n            // fall through to mock\n            if (!timer) startMock();\n        };\n        ws.onclose = ()=>{\n            if (!timer) startMock();\n        };\n    } catch (e) {\n        startMock();\n    }\n    function startMock() {\n        const tick = ()=>{\n            const snap = mockChain(symbol);\n            onSnapshot(snap);\n        };\n        tick();\n        // @ts-ignore\n        timer = setInterval(tick, 1500);\n    }\n    return ()=>{\n        if (ws) ws.close();\n        if (timer) clearInterval(timer);\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9jaGFpbi1zdHJlYW0udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBaUJBLE1BQU1BLGtCQUFrQjtBQUVqQixTQUFTQyxVQUFVQyxNQUFjO0lBQ3RDLE1BQU1DLE9BQU87SUFDYixNQUFNQyxPQUFtQkMsTUFBTUMsSUFBSSxDQUFDO1FBQUVDLFFBQVE7SUFBRyxHQUFHLENBQUNDLEdBQUdDO1FBQ3RELE1BQU1DLElBQUksQ0FBQ1AsT0FBT00sQ0FBQUEsSUFBSztRQUN2QixPQUFPO1lBQ0xFLFFBQVEsUUFBU0QsSUFBSTtZQUNyQkUsUUFBUSxPQUFRQyxLQUFLQyxHQUFHLENBQUNMLElBQUksS0FBSztZQUNsQ00sU0FBUyxNQUFNTixJQUFJLEtBQUtJLEtBQUtHLE1BQU0sS0FBSztZQUN4Q0MsU0FBUyxNQUFNUixJQUFJLEtBQUtJLEtBQUtHLE1BQU0sS0FBSztZQUN4Q0UsUUFBUSxNQUFNVCxJQUFJLEtBQUtJLEtBQUtHLE1BQU0sS0FBSztZQUN2Q0csUUFBUSxNQUFNVixJQUFJLEtBQUtJLEtBQUtHLE1BQU0sS0FBSztZQUN2Q0ksT0FBTyxPQUFRUCxLQUFLUSxHQUFHLENBQUNaLElBQUksS0FBSztRQUNuQztJQUNGO0lBQ0EsT0FBTztRQUFFUDtRQUFRb0IsUUFBUXRCO1FBQWlCSTtRQUFNbUIsUUFBUTtJQUFNO0FBQ2hFO0FBRU8sU0FBU0MsbUJBQW1CdEIsTUFBYyxFQUFFdUIsVUFBc0M7SUFDdkYsSUFBSUMsS0FBdUI7SUFDM0IsSUFBSUMsUUFBdUI7SUFFM0IsSUFBSTtRQUNGLE1BQU14QixPQUFPLEtBQW1CLElBQWUsT0FBZ0IwQixxQkFBcUIsSUFBS0MsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyxtQkFBbUIsSUFBSTtRQUM1SCxNQUFNQyxNQUFNOUIsT0FBTyxpQkFBNEMsT0FBM0IrQixtQkFBbUJoQztRQUN2RHdCLEtBQUssSUFBSVMsVUFBVUY7UUFDbkJQLEdBQUdVLFNBQVMsR0FBRyxDQUFDQztZQUNkLElBQUk7Z0JBQ0YsTUFBTUMsT0FBT0MsS0FBS0MsS0FBSyxDQUFDSCxJQUFJQyxJQUFJO2dCQUNoQyxJQUFJQSxRQUFRQSxLQUFLbEMsSUFBSSxFQUFFcUIsV0FBVztvQkFBRSxHQUFHYSxJQUFJO29CQUFFZixRQUFRO2dCQUFLO1lBQzVELEVBQUUsVUFBTSxDQUFDO1FBQ1g7UUFDQUcsR0FBR2UsT0FBTyxHQUFHO1lBQ1gsdUJBQXVCO1lBQ3ZCLElBQUksQ0FBQ2QsT0FBT2U7UUFDZDtRQUNBaEIsR0FBR2lCLE9BQU8sR0FBRztZQUNYLElBQUksQ0FBQ2hCLE9BQU9lO1FBQ2Q7SUFDRixFQUFFLFVBQU07UUFDTkE7SUFDRjtJQUVBLFNBQVNBO1FBQ1AsTUFBTUUsT0FBTztZQUNYLE1BQU1DLE9BQU81QyxVQUFVQztZQUN2QnVCLFdBQVdvQjtRQUNiO1FBQ0FEO1FBQ0EsYUFBYTtRQUNiakIsUUFBUW1CLFlBQVlGLE1BQU07SUFDNUI7SUFFQSxPQUFPO1FBQ0wsSUFBSWxCLElBQUlBLEdBQUdxQixLQUFLO1FBQ2hCLElBQUlwQixPQUFPcUIsY0FBY3JCO0lBQzNCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL2NoYWluLXN0cmVhbS50cz8wZjE5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIENoYWluUm93ID0ge1xyXG4gIHN0cmlrZTogbnVtYmVyXHJcbiAgY2FsbElWOiBudW1iZXJcclxuICBjYWxsQmlkOiBudW1iZXJcclxuICBjYWxsQXNrOiBudW1iZXJcclxuICBwdXRCaWQ6IG51bWJlclxyXG4gIHB1dEFzazogbnVtYmVyXHJcbiAgcHV0SVY6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDaGFpblNuYXBzaG90ID0ge1xyXG4gIHN5bWJvbDogc3RyaW5nXHJcbiAgZXhwaXJ5OiBzdHJpbmdcclxuICByb3dzOiBDaGFpblJvd1tdXHJcbiAgaXNMaXZlOiBib29sZWFuXHJcbn1cclxuXHJcbmNvbnN0IEZBTExCQUNLX0VYUElSWSA9ICczMEQnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbW9ja0NoYWluKHN5bWJvbDogc3RyaW5nKTogQ2hhaW5TbmFwc2hvdCB7XHJcbiAgY29uc3QgYmFzZSA9IDUwXHJcbiAgY29uc3Qgcm93czogQ2hhaW5Sb3dbXSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDE2IH0sIChfLCBpKSA9PiB7XHJcbiAgICBjb25zdCBrID0gKGJhc2UgKyBpKSAqIDJcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN0cmlrZTogNTBfMDAwICsgayAqIDEwMCxcclxuICAgICAgY2FsbElWOiAwLjQ1ICsgKE1hdGguc2luKGkgLyAzKSAqIDAuMDUpLFxyXG4gICAgICBjYWxsQmlkOiA5MDAgLSBpICogMTQgKyBNYXRoLnJhbmRvbSgpICogMTAsXHJcbiAgICAgIGNhbGxBc2s6IDkyMCAtIGkgKiAxMyArIE1hdGgucmFuZG9tKCkgKiAxMCxcclxuICAgICAgcHV0QmlkOiA4ODAgKyBpICogMTIgKyBNYXRoLnJhbmRvbSgpICogMTAsXHJcbiAgICAgIHB1dEFzazogOTAwICsgaSAqIDEzICsgTWF0aC5yYW5kb20oKSAqIDEwLFxyXG4gICAgICBwdXRJVjogMC40MiArIChNYXRoLmNvcyhpIC8gNCkgKiAwLjA1KSxcclxuICAgIH1cclxuICB9KVxyXG4gIHJldHVybiB7IHN5bWJvbCwgZXhwaXJ5OiBGQUxMQkFDS19FWFBJUlksIHJvd3MsIGlzTGl2ZTogZmFsc2UgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29ubmVjdENoYWluU3RyZWFtKHN5bWJvbDogc3RyaW5nLCBvblNuYXBzaG90OiAoczogQ2hhaW5TbmFwc2hvdCkgPT4gdm9pZCkge1xyXG4gIGxldCB3czogV2ViU29ja2V0IHwgbnVsbCA9IG51bGxcclxuICBsZXQgdGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsXHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBiYXNlID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5fX05FWFRfUFVCTElDX09SQ0hfV1MpIHx8IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX09SQ0hfV1MgfHwgJ3dzOi8vMTI3LjAuMC4xOjgwODAnXHJcbiAgICBjb25zdCB1cmwgPSBiYXNlICsgYC9jaGFpbj9zeW1ib2w9JHtlbmNvZGVVUklDb21wb25lbnQoc3ltYm9sKX1gXHJcbiAgICB3cyA9IG5ldyBXZWJTb2NrZXQodXJsKVxyXG4gICAgd3Mub25tZXNzYWdlID0gKGV2dCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2dC5kYXRhKVxyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEucm93cykgb25TbmFwc2hvdCh7IC4uLmRhdGEsIGlzTGl2ZTogdHJ1ZSB9KVxyXG4gICAgICB9IGNhdGNoIHt9XHJcbiAgICB9XHJcbiAgICB3cy5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAvLyBmYWxsIHRocm91Z2ggdG8gbW9ja1xyXG4gICAgICBpZiAoIXRpbWVyKSBzdGFydE1vY2soKVxyXG4gICAgfVxyXG4gICAgd3Mub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgaWYgKCF0aW1lcikgc3RhcnRNb2NrKClcclxuICAgIH1cclxuICB9IGNhdGNoIHtcclxuICAgIHN0YXJ0TW9jaygpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdGFydE1vY2soKSB7XHJcbiAgICBjb25zdCB0aWNrID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBzbmFwID0gbW9ja0NoYWluKHN5bWJvbClcclxuICAgICAgb25TbmFwc2hvdChzbmFwKVxyXG4gICAgfVxyXG4gICAgdGljaygpXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aW1lciA9IHNldEludGVydmFsKHRpY2ssIDE1MDApXHJcbiAgfVxyXG5cclxuICByZXR1cm4gKCkgPT4ge1xyXG4gICAgaWYgKHdzKSB3cy5jbG9zZSgpXHJcbiAgICBpZiAodGltZXIpIGNsZWFySW50ZXJ2YWwodGltZXIgYXMgYW55KVxyXG4gIH1cclxufVxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJGQUxMQkFDS19FWFBJUlkiLCJtb2NrQ2hhaW4iLCJzeW1ib2wiLCJiYXNlIiwicm93cyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiayIsInN0cmlrZSIsImNhbGxJViIsIk1hdGgiLCJzaW4iLCJjYWxsQmlkIiwicmFuZG9tIiwiY2FsbEFzayIsInB1dEJpZCIsInB1dEFzayIsInB1dElWIiwiY29zIiwiZXhwaXJ5IiwiaXNMaXZlIiwiY29ubmVjdENoYWluU3RyZWFtIiwib25TbmFwc2hvdCIsIndzIiwidGltZXIiLCJ3aW5kb3ciLCJfX05FWFRfUFVCTElDX09SQ0hfV1MiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfT1JDSF9XUyIsInVybCIsImVuY29kZVVSSUNvbXBvbmVudCIsIldlYlNvY2tldCIsIm9ubWVzc2FnZSIsImV2dCIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJvbmVycm9yIiwic3RhcnRNb2NrIiwib25jbG9zZSIsInRpY2siLCJzbmFwIiwic2V0SW50ZXJ2YWwiLCJjbG9zZSIsImNsZWFySW50ZXJ2YWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/chain-stream.ts\n"));

/***/ })

});